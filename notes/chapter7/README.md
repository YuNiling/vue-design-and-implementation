# chapter7 渲染器的设计

- [x] 1. 渲染器与响应系统的结合
- [x] 2. 渲染器的基本概念
- [x] 3. 自定义渲染器
- [x] 4. 总结

### 一、渲染器与响应系统的结合

流程如下：
1. 定义一个响应式数据，例如 count，它是一个 ref；
2. 在副作用函数内调用 renderer 函数执行渲染，副作用函数执行完毕后，与响应式数据建立响应联系；
3. 修改响应式数据 count.value 的值，副作用重新执行，完成重新渲染。

### 二、渲染器的基本概念

**渲染器的作用**：把虚拟 DOM 渲染为**特定平台**上的真实元素。
**虚拟 DOM** 是由一个个节点组成的树形结构，通常用英文 virtual DOM 来表达，有时会简写成 vdom 或 vnode。
渲染器把虚拟 DOM 节点渲染为真实 DOM 节点的过程叫做**挂载**，通常用英文 mount 来表达。
对于新旧 vnode 都存在的情况，渲染器则会执行**打补丁**操作，即对比新旧 vnode，只更新变化的内容。

### 三、自定义渲染器

在 Vue.js 中，渲染器不仅能在浏览器中运行，还可以在 Node.js 中运行。

为了让渲染器不依赖浏览器平台特有的 API，将这些浏览器特有的 API 抽离成可配置对象，用户可以在调用 createRenderer 函数创建渲染器的时候指定自定义的配置对象，从而实现自定义的行为。